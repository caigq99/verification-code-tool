# 验证码获取工具

基于小程序API逆向分析实现的验证码自动获取工具。

## 功能特点

- 🚀 自动化获取验证码流程
- 🔐 完整的加密解密实现
- 📱 模拟真实设备指纹
- 🛡️ API签名验证
- ⚡ 支持 YCursor 和 YAugment 项目

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 命令行使用

```bash
python verification_code_getter.py
```

然后按提示输入项目名称（YCursor 或 YAugment）。

### 编程使用

```python
from verification_code_getter import VerificationCodeGetter

# 创建获取器
getter = VerificationCodeGetter()

# 获取 YCursor 验证码
code = getter.get_code_for_project("YCursor")
print(f"验证码: {code}")

# 获取 YAugment 验证码
code = getter.get_code_for_project("YAugment")
print(f"验证码: {code}")
```

## 工作流程

1. **获取签名密钥** - 从服务器获取API签名密钥
2. **创建会话** - 生成设备指纹并创建广告会话
3. **模拟观看广告** - 等待一定时间模拟广告观看
4. **验证完成** - 提交广告观看验证
5. **获取验证码** - 解密并返回最终验证码

## 技术实现

### 加密算法
- **设备指纹**: SHA256 哈希
- **API签名**: HMAC-SHA256
- **验证码解密**: AES-256-CBC

### 安全机制
- 动态签名密钥获取
- 设备指纹防伪造
- 会话时效性控制
- 频率限制保护

## 注意事项

⚠️ **重要提醒**:
- 本工具仅用于学习和研究目的
- 请遵守相关服务的使用条款
- 不要频繁调用API，避免被限制
- 建议在调用间隔中加入适当延时

## 错误处理

工具包含完整的错误处理机制：
- 网络连接错误
- API响应错误
- 加密解密错误
- 频率限制错误

## 示例输出

```
验证码获取工具
支持的项目: YCursor, YAugment

请输入项目名称 (默认: YCursor): YCursor
开始获取 YCursor 验证码...
==================================================
✓ 获取签名密钥成功，版本: 1
✓ 创建会话成功: 3b6c42e1-1975-4043-8c05-7a39bdecda45
⏳ 模拟观看广告...
✓ 广告验证成功
✓ 获取验证码成功: 9JEMTZ
  过期时间: 2025-08-09T17:37:48.161396
==================================================
🎉 最终验证码: 9JEMTZ

✅ 成功获取验证码: 9JEMTZ
```

## 故障排除

### 常见问题

1. **获取签名密钥失败**
   - 检查网络连接
   - 确认服务器可访问

2. **创建会话失败**
   - 可能是频率限制，等待后重试
   - 检查项目名称是否正确

3. **解密失败**
   - 确认temp_token有效性
   - 检查加密数据格式

4. **频率限制**
   - 等待10-15分钟后重试
   - 避免短时间内多次调用

## 开发说明

代码结构清晰，易于扩展：
- `VerificationCodeGetter` 主类
- 模块化的方法设计
- 完整的异常处理
- 详细的日志输出

## 许可证

本项目仅供学习研究使用，请勿用于商业用途。
