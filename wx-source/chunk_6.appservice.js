__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'pages/validity/validity':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"softwareInfo":new Array(2),"systemInfo":new Array(2)},K=U===true,d=(C)=>{},e=(C)=>{},f=(C)=>{},g=(C)=>{},h=(C)=>{},i=(C)=>{},c=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"geo-shape geo-circle1 gpu-accelerated")},d);E("view",{},(N,C)=>{if(C)L(N,"geo-shape geo-circle2 gpu-accelerated")},e);E("view",{},(N,C)=>{if(C)L(N,"geo-shape geo-triangle gpu-accelerated")},f);E("view",{},(N,C)=>{if(C)L(N,"geo-shape geo-square gpu-accelerated")},g);E("view",{},(N,C)=>{if(C)L(N,"flowing-line line1 gpu-accelerated")},h);E("view",{},(N,C)=>{if(C)L(N,"flowing-line line2 gpu-accelerated")},i)},m=(C,T)=>{C?T("éªŒè¯"):T()},n=(C,T)=>{C?T("æ—¶æ•ˆ"):T()},l=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"main-title gpu-accelerated")},m);E("text",{},(N,C)=>{if(C)L(N,"sub-title gpu-accelerated")},n)},o=(C)=>{},p=(C,T)=>{C||K||!!(Z(U.softwareInfo,"name")||Z(U.softwareInfo,"description"))||undefined?T(Y(Y(X(D.softwareInfo).name)+" - "+Y(X(D.softwareInfo).description)),(N)=>{A["softwareInfo"][0]=A["softwareInfo"][1]=(D,E,T)=>{T(N,Y(Y(X(D.softwareInfo).name)+" - "+Y(X(D.softwareInfo).description)))}}):T()},k=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"title-wrapper")},l);E("view",{},(N,C)=>{if(C)L(N,"title-decoration gpu-accelerated")},o);E("text",{},(N,C)=>{if(C)L(N,"title-desc gpu-accelerated")},p)},r,u=(C)=>{},v=(C,T)=>{C?T("è·å–ä¸­"):T()},t=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"loading-circle gpu-accelerated")},u);E("text",{},(N,C)=>{if(C)L(N,"loading-text")},v)},y=(C,T)=>{C||K||U.errorMessage?T(Y(D.errorMessage)):T()},A0=(C,T)=>{C?T("é‡è¯•"):T()},z=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"retry-text")},A0)},x=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"error-text")},y);E("view",{},(N,C)=>{if(C)L(N,"retry-btn");if(C)O(N,"bindtap","fetchValidityInfo")},z)},w=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"error-bubble")},x)},D0=(C)=>{},G0=(C,T)=>{C?T("ğŸ‘¨"):T()},H0=(C,T)=>{C?T("éªŒè¯ç éªŒè¯"):T()},F0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"card-emoji")},G0);E("text",{},(N,C)=>{if(C)L(N,"card-title")},H0)},I0,L0=(C,T)=>{C||K||Z(Z(U.validityInfo,"verification"),"durationText")?T(Y(X(X(D.validityInfo).verification).durationText)):T()},M0=(C,T)=>{C||K||Z(Z(U.validityInfo,"verification"),"detailText")?T(Y(X(X(D.validityInfo).verification).detailText)):T()},K0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"big-number")},L0);E("text",{},(N,C)=>{if(C)L(N,"small-desc")},M0)},O0=(C,T)=>{C?T("æœªå¼€å¯"):T()},N0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"disabled-text")},O0)},J0=(C,T,E)=>{if(I0===1){E("view",{},(N,C)=>{if(C)L(N,"card-info")},K0)}else{E("view",{},(N,C)=>{if(C)L(N,"card-disabled")},N0)}},E0=(C,T,E,B)=>{E("view",{},(N,C)=>{if(C)L(N,"card-header")},F0);I0=X(X(D.validityInfo).verification).enabled?1:0;B(I0,J0)},C0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"card-decoration deco-purple gpu-accelerated")},D0);E("view",{},(N,C)=>{if(C)L(N,"card-content")},E0)},Q0=(C)=>{},T0=(C,T)=>{C?T("ğŸ‘‘"):T()},U0=(C,T)=>{C?T("èµèµç”¨æˆ·æ‰«ç "):T()},S0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"card-emoji")},T0);E("text",{},(N,C)=>{if(C)L(N,"card-title")},U0)},V0,Y0=(C,T)=>{C||K||Z(Z(U.validityInfo,"vipQq"),"durationText")?T(Y(X(X(D.validityInfo).vipQq).durationText)):T()},Z0=(C,T)=>{C||K||Z(Z(U.validityInfo,"vipQq"),"detailText")?T(Y(X(X(D.validityInfo).vipQq).detailText)):T()},X0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"big-number")},Y0);E("text",{},(N,C)=>{if(C)L(N,"small-desc")},Z0)},b0=(C,T)=>{C?T("æœªå¼€å¯"):T()},a0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"disabled-text")},b0)},W0=(C,T,E)=>{if(V0===1){E("view",{},(N,C)=>{if(C)L(N,"card-info")},X0)}else{E("view",{},(N,C)=>{if(C)L(N,"card-disabled")},a0)}},R0=(C,T,E,B)=>{E("view",{},(N,C)=>{if(C)L(N,"card-header")},S0);V0=X(X(D.validityInfo).vipQq).enabled?1:0;B(V0,W0)},P0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"card-decoration deco-gold gpu-accelerated")},Q0);E("view",{},(N,C)=>{if(C)L(N,"card-content")},R0)},d0=(C)=>{},g0=(C,T)=>{C?T("ğŸ’"):T()},h0=(C,T)=>{C?T("èµåŠ©è¯´æ˜"):T()},f0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"sponsor-emoji")},g0);E("text",{},(N,C)=>{if(C)L(N,"sponsor-title")},h0)},j0=(C,T)=>{C?T("èµèµè¶…è¿‡100ï¿¥ï¼Œç›´æ¥QQæ‰«ç éªŒè¯"):T()},k0=(C,T)=>{C?T("æ— éœ€å…³æ³¨å…¬ä¼—å·è·å–éªŒè¯ç "):T()},l0=(C,T)=>{C?T("â¤ æ„Ÿè°¢æ”¯æŒ â¤"):T()},i0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"sponsor-main-text")},j0);E("text",{},(N,C)=>{if(C)L(N,"sponsor-sub-text")},k0);E("text",{},(N,C)=>{if(C)L(N,"sponsor-thanks")},l0)},n0=(C,T)=>{C?T("å·²èµèµä½†æœªåŠ å…¥åå•ï¼Ÿ"):T()},o0=(C,T)=>{C?T("å‘é€è¯æ˜å’ŒQQå·è‡³"):T()},p0=(C,T)=>{C?T("yan@yjf.vin"):T()},m0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"contact-hint")},n0);E("text",{},(N,C)=>{if(C)L(N,"contact-info")},o0);E("text",{},(N,C)=>{if(C)L(N,"contact-email")},p0)},e0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"sponsor-header")},f0);E("view",{},(N,C)=>{if(C)L(N,"sponsor-info")},i0);E("view",{},(N,C)=>{if(C)L(N,"sponsor-contact-area")},m0)},c0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"sponsor-decoration gpu-accelerated")},d0);E("view",{},(N,C)=>{if(C)L(N,"sponsor-content")},e0)},B0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"validity-card card-left gpu-accelerated")},C0);E("view",{},(N,C)=>{if(C)L(N,"validity-card card-right gpu-accelerated")},P0);E("view",{},(N,C)=>{if(C)L(N,"creative-sponsor-card gpu-accelerated")},c0)},s=(C,T,E)=>{if(r===1){E("view",{},(N,C)=>{if(C)L(N,"creative-loading gpu-accelerated")},t)}else if(r===2){E("view",{},(N,C)=>{if(C)L(N,"creative-error gpu-accelerated")},w)}else{E("view",{},(N,C)=>{var $A=X(D.animationState).cardsReady;if(C||K||!!(Z(U.animationState,"cardsReady")||($A?undefined:undefined))||undefined)L(N,"creative-validity-content "+Y($A?"cards-show":"cards-hide")+" gpu-accelerated")},B0)}},q=(C,T,E,B)=>{r=D.loading?1:D.error?2:0;B(r,s)},r0=(C,T)=>{C?T("ï¼œ"):T()},q0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"back-button");if(C)O(N,"bindtap","navigateBack")},r0)},t0=(C)=>{},u0,x0=(C,T)=>{C?T("è·å–ä¸€è¨€ä¸­"):T()},z0=(C)=>{},A1=(C)=>{},B1=(C)=>{},y0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"dot gpu-accelerated")},z0);E("view",{},(N,C)=>{if(C)L(N,"dot gpu-accelerated")},A1);E("view",{},(N,C)=>{if(C)L(N,"dot gpu-accelerated")},B1)},w0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"loading-text")},x0);E("view",{},(N,C)=>{if(C)L(N,"loading-dots")},y0)},D1=(C,T)=>{C||K||!!Z(U.hitokoto,"text")||undefined?T(Y("ã€Œ "+Y(X(D.hitokoto).text)+" ã€")):T()},C1=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"hitokoto-text")},D1)},v0=(C,T,E)=>{if(u0===1){E("view",{},(N,C)=>{if(C)L(N,"hitokoto-loading gpu-accelerated")},w0)}else{E("view",{},(N,C)=>{if(C)L(N,"hitokoto-content gpu-accelerated")},C1)}},s0=(C,T,E,B)=>{E("view",{},(N,C)=>{if(C)L(N,"footer-decoration gpu-accelerated")},t0);u0=X(D.hitokoto).loading?1:0;B(u0,v0)},j=(C,T,E)=>{E("view",{},(N,C)=>{var $A=X(D.animationState).titleReady;if(C||K||!!(Z(U.animationState,"titleReady")||($A?undefined:undefined))||undefined)L(N,"creative-title-zone "+Y($A?"title-show":"title-hide")+" smooth-animation")},k);E("view",{},(N,C)=>{var $A=X(D.animationState).contentReady;if(C||K||!!(Z(U.animationState,"contentReady")||($A?undefined:undefined))||undefined)L(N,"creative-validity-area "+Y($A?"content-show":"content-hide")+" smooth-animation")},q);E("view",{},(N,C)=>{if(C)L(N,"back-button-container");if(C||K||!!(Z(U.systemInfo,"backButtonTop")||Z(U.systemInfo,"backButtonLeft"))||undefined)R.y(N,"top:"+Y(X(D.systemInfo).backButtonTop)+"px;left:"+Y(X(D.systemInfo).backButtonLeft)+"px;");A["systemInfo"][0]=A["systemInfo"][1]=(D,E,T)=>{R.y(N,"top:"+Y(X(D.systemInfo).backButtonTop)+"px;left:"+Y(X(D.systemInfo).backButtonLeft)+"px;")}},q0);E("view",{},(N,C)=>{if(C)L(N,"hitokoto-footer")},s0)},b=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"artistic-background gpu-accelerated")},c);E("view",{},(N,C)=>{if(C)L(N,"main-content gpu-accelerated")},j)},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"page-container")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "pages/validity/validity";__wxRouteBegin = true;__wxAppCurrentFile__="pages/validity/validity.js";define("pages/validity/validity.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Page({data:{loading:!0,error:!1,errorMessage:"è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•",software:"YAugment",softwareInfo:{name:"YAugment",description:"Y ç³»åˆ—"},validityInfo:{verification:{enabled:!1,durationHours:0,durationText:"",detailText:""},vipQq:{enabled:!1,durationHours:0,durationText:"",detailText:""}},hitokoto:{text:"åŠ è½½ä¸­...",from:"",from_who:"",loading:!0,error:!1},animationState:{isEntering:!0,contentReady:!1,titleReady:!1,cardsReady:!1},systemInfo:{backButtonTop:44,backButtonLeft:16}},onLoad:function(t){var o=t.software||"YAugment";this.setSoftwareInfo(o),this.initSystemInfo(),this.initPageAnimation(),this.fetchValidityInfo(),this.fetchHitokoto()},setSoftwareInfo:function(t){var o={YCursor:{name:"YCursor",description:"Y ç³»åˆ—"},YAugment:{name:"YAugment",description:"Y ç³»åˆ—"}},i=o[t]||o.YAugment;this.setData({software:t,softwareInfo:i})},initSystemInfo:function(){var t=wx.getSystemInfoSync(),o=wx.getMenuButtonBoundingClientRect(),i=o.top+6,a=t.windowWidth-o.right+8;this.setData({"systemInfo.backButtonTop":i,"systemInfo.backButtonLeft":a})},initPageAnimation:function(){var t=this;wx.nextTick((function(){t.setData({"animationState.isEntering":!0}),setTimeout((function(){t.setData({"animationState.titleReady":!0})}),100),setTimeout((function(){t.setData({"animationState.contentReady":!0})}),300),setTimeout((function(){t.setData({"animationState.cardsReady":!0,"animationState.isEntering":!1})}),500)}))},fetchValidityInfo:function(){var t=this;this.setData({loading:!0,error:!1});var o={project_id:this.data.software};wx.request({url:"https://app.yan.vin/api/public/config",method:"GET",data:o,header:{"Content-Type":"application/json"},success:function(o){200===o.statusCode&&o.data?o.data.error?t.handleError():t.processValidityData(o.data):429===o.statusCode?t.handleRateLimitError():t.handleError()},fail:function(o){t.handleError()}})},processValidityData:function(t){var o,i,a,e,n={verification:{enabled:(null===(o=t.verification)||void 0===o?void 0:o.enabled)||!1,durationHours:(null===(i=t.verification)||void 0===i?void 0:i.duration_hours)||0,durationText:"",detailText:""},vipQq:{enabled:(null===(a=t.vip_qq)||void 0===a?void 0:a.enabled)||!1,durationHours:(null===(e=t.vip_qq)||void 0===e?void 0:e.duration_hours)||0,durationText:"",detailText:""}};if(n.verification.enabled){var r=this.formatDuration(n.verification.durationHours);n.verification.durationText=r.durationText,n.verification.detailText=r.detailText}if(n.vipQq.enabled){var s=this.formatDuration(n.vipQq.durationHours);n.vipQq.durationText=s.durationText,n.vipQq.detailText=s.detailText}this.setData({loading:!1,error:!1,validityInfo:n})},formatDuration:function(t){var o=Math.floor(t/24),i=t%24,a="".concat(t,"å°æ—¶"),e="";return o>0?(e="".concat(o,"å¤©"),i>0&&(e+=" ".concat(i.toString().padStart(2,"0")," ä¸ªå°æ—¶"))):e="".concat(t," ä¸ªå°æ—¶"),{durationText:a,detailText:e}},handleRateLimitError:function(){this.setData({loading:!1,error:!0,errorMessage:"é¢‘ç‡è¿‡é«˜ï¼Œè¯·ç­‰å¾…10åˆ†é’Ÿåå†è¯•"})},handleError:function(){this.setData({loading:!1,error:!0,errorMessage:"è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•"})},fetchHitokoto:function(){var t=this;this.setData({"hitokoto.loading":!0,"hitokoto.error":!1});var o=["d","b","i"],i=o[Math.floor(Math.random()*o.length)];wx.request({url:"https://v1.hitokoto.cn",method:"GET",header:{"content-type":"application/json; charset=utf-8"},data:{c:i,encode:"json",max_length:25},success:function(o){if(200===o.statusCode&&o.data){var i=o.data.hitokoto||"æš‚æ— å†…å®¹";(i=String(i)).endsWith("ã€‚")&&(i=i.slice(0,-1)),i.length>25&&(i=i.substring(0,22)+"..."),t.setData({"hitokoto.text":i,"hitokoto.from":o.data.from||"","hitokoto.from_who":o.data.from_who||"","hitokoto.loading":!1,"hitokoto.error":!1})}else t.handleHitokotoError()},fail:function(o){t.handleHitokotoError()}})},handleHitokotoError:function(){this.setData({"hitokoto.text":"äº«å—ä»Šå¤©ï¼ŒæœŸå¾…æ˜å¤©","hitokoto.from":"","hitokoto.from_who":"","hitokoto.loading":!1,"hitokoto.error":!0})},navigateBack:function(){wx.navigateBack()}});
},{isPage:true,isComponent:true,currentFile:'pages/validity/validity.js'});require("pages/validity/validity.js");